// app/data/cluesGameData.js - إضافة نظام إدارة الأسئلة المستخدمة

export const cluesGameQuestions = [
  // 🏃 أسئلة رياضية - موسعة مع أسماء متشابهة للتشويش
  {
    id: 'sport_1',
    category: 'رياضة',
    answer: 'محمد صلاح',
    clues: [
      'أفريقيا', 'مصر', '365', 'إنجلترا', 'ليفربول', 'الفرعون', 'جناح أيمن', '10', 'البريميرليغ', 'الهداف المصري'
    ]
  },
  {
    id: 'sport_2',
    category: 'رياضة',
    answer: 'كريستيانو رونالدو',
    clues: [
      'أوروبا', 'البرتغال', 'آسيا', 'السعودية', 'النصر', 'ريال مدريد', 'CR7', '5 كؤوس ذهبية', 'يوفنتوس', 'الدون'
    ]
  },
  {
    id: 'sport_3',
    category: 'رياضة',
    answer: 'ليونيل ميسي',
    clues: [
      'أمريكا الجنوبية', 'الأرجنتين', 'أمريكا الشمالية', 'الولايات المتحدة', 'إنتر ميامي', 'برشلونة', '10', '8 كؤوس ذهبية', 'كأس العالم 2022', 'البرغوث'
    ]
  },
  {
    id: 'sport_4',
    category: 'رياضة',
    answer: 'محمد أبو تريكة',
    clues: [
      'أفريقيا', 'مصر', 'الأهلي', 'رقم 22', 'صانع ألعاب', 'أسطورة الكرة المصرية', 'نجم الأهلي', 'قائد المنتخب', 'كأس أفريقيا', 'الأمير'
    ]
  },
  {
    id: 'sport_5',
    category: 'رياضة',
    answer: 'محمد بركات',
    clues: [
      'أفريقيا', 'مصر', 'الزمالك', 'مهاجم', 'الدوري المصري', 'المنتخب المصري', 'هداف الزمالك', 'نجم السبعينات', 'الكرة المصرية', 'أسطورة الزمالك'
    ]
  },
  {
    id: 'sport_6',
    category: 'رياضة',
    answer: 'محمد النني',
    clues: [
      'أفريقيا', 'مصر', 'إنجلترا', 'أرسنال', 'خط الوسط', 'المنتخب المصري', 'البريميرليغ', 'الجانرز', 'لاعب وسط', 'النسر المصري'
    ]
  },
  {
    id: 'sport_7',
    category: 'رياضة',
    answer: 'محمد علي',
    clues: [
      'أمريكا', 'الملاكمة', 'الوزن الثقيل', 'أسطورة الملاكمة', 'الفراشة', 'أطفو كالفراشة', 'بطل العالم', 'كاسيوس كلاي', 'الأعظم', 'I am the greatest'
    ]
  },
  {
    id: 'sport_8',
    category: 'رياضة',
    answer: 'أحمد حجازي',
    clues: [
      'أفريقيا', 'مصر', 'مدافع', 'إنجلترا', 'وست بروميتش', 'المنتخب المصري', 'الدفاع المصري', 'البريميرليغ', 'قلب الدفاع', 'الصخرة المصرية'
    ]
  },
  {
    id: 'sport_9',
    category: 'رياضة',
    answer: 'أحمد فتحي',
    clues: [
      'أفريقيا', 'مصر', 'الأهلي', 'ظهير أيسر', 'المنتخب المصري', 'نجم الأهلي', 'الدوري المصري', 'كأس أفريقيا', 'الظهير الأيسر', 'فارس الأهلي'
    ]
  },
  {
    id: 'sport_10',
    category: 'رياضة',
    answer: 'عبد الرحمن مجدي',
    clues: [
      'أفريقيا', 'مصر', 'الأهلي', 'مهاجم', 'الدوري المصري', 'المنتخب المصري', 'هداف الأهلي', 'نجم شاب', 'مواهب مصرية', 'أمل المستقبل'
    ]
  },

  // 🎬 أسئلة فنانين ومطربين - موسعة
  {
    id: 'artist_1',
    category: 'فنانين',
    answer: 'عادل إمام',
    clues: [
      'أفريقيا', 'مصر', 'كوميديا', 'مسرح', 'سينما', 'الزعيم', 'المدرسة', 'الإرهاب والكباب', 'عالم عالم', 'نجم الكوميديا العربية'
    ]
  },
  {
    id: 'artist_2',
    category: 'فنانين',
    answer: 'فيروز',
    clues: [
      'آسيا', 'لبنان', 'موسيقى', 'جبال الشوف', 'الرحابنة', 'سفيرة إلى النجوم', 'صباح الخير', 'زهرة المدائن', 'بعلبك', 'صوت لبنان'
    ]
  },
  {
    id: 'artist_3',
    category: 'فنانين',
    answer: 'أم كلثوم',
    clues: [
      'أفريقيا', 'مصر', 'طرب', 'الدلتا', 'محمد عبد الوهاب', 'كوكب الشرق', 'الأطلال', 'ألف ليلة وليلة', 'أربع ساعات', 'سيدة الغناء العربي'
    ]
  },
  {
    id: 'artist_4',
    category: 'فنانين',
    answer: 'محمد عبده',
    clues: [
      'آسيا', 'السعودية', 'طرب', 'صوت الأرض', 'الخليج', 'فنان العرب', 'الجزيرة العربية', 'الطرب الأصيل', 'صوت الخليج', 'عملاق الغناء'
    ]
  },
  {
    id: 'artist_5',
    category: 'فنانين',
    answer: 'محمد رمضان',
    clues: [
      'أفريقيا', 'مصر', 'تمثيل', 'أكشن', 'دراما', 'النمر', 'سينما مصرية', 'نجم الأكشن', 'الزعيم الصغير', 'ملك الإثارة'
    ]
  },
  {
    id: 'artist_6',
    category: 'فنانين',
    answer: 'محمد هنيدي',
    clues: [
      'أفريقيا', 'مصر', 'كوميديا', 'صعيدي', 'إسماعيلية', 'ضحك', 'كوميديا شعبية', 'أفلام مصرية', 'نجم الضحك', 'فارس الكوميديا'
    ]
  },
  {
    id: 'artist_7',
    category: 'فنانين',
    answer: 'محمد فؤاد',
    clues: [
      'أفريقيا', 'مصر', 'غناء', 'شباب', 'عاطفية', 'رومانسية', 'صوت شبابي', 'أغاني حب', 'نجم التسعينات', 'صوت العشاق'
    ]
  },
  {
    id: 'artist_8',
    category: 'فنانين',
    answer: 'عمرو دياب',
    clues: [
      'أفريقيا', 'مصر', 'بوب', 'الهضبة', 'تميم يونس', 'إنت عمري', 'نور العين', 'ملك الأجيال', 'صوت مصر', 'أمير الغناء العربي'
    ]
  },
  {
    id: 'artist_9',
    category: 'فنانين',
    answer: 'عمر الشريف',
    clues: [
      'أفريقيا', 'مصر', 'هوليوود', 'دكتور زيفاجو', 'لورانس العرب', 'عالمي', 'أوسكار', 'سينما عالمية', 'نجم هوليوود', 'فخر العرب'
    ]
  },
  {
    id: 'artist_10',
    category: 'فنانين',
    answer: 'عمرو يوسف',
    clues: [
      'أفريقيا', 'مصر', 'تمثيل', 'دراما', 'سينما حديثة', 'أفلام مصرية', 'جيل جديد', 'دراما رمضان', 'نجم الشاشة', 'الجيل الذهبي'
    ]
  },

  // 🎮 ألعاب وترفيه
  {
    id: 'games_1',
    category: 'ألعاب',
    answer: 'فيفا',
    clues: [
      'لعبة', 'كرة قدم', 'بلايستيشن', 'EA Sports', 'سنوياً', 'FUT', 'البطاقات', 'المحاكاة', 'الليجات الأوروبية', 'الأشهر رياضياً'
    ]
  },
  {
    id: 'games_2',
    category: 'ألعاب',
    answer: 'كول أوف ديوتي',
    clues: [
      'إطلاق نار', 'حرب', 'أكشن', 'متعدد اللاعبين', 'COD', 'أسلحة', 'معارك', 'جندي', 'باتل رويال', 'وارزون'
    ]
  },
  {
    id: 'games_3',
    category: 'ألعاب',
    answer: 'فورتنايت',
    clues: [
      'باتل رويال', 'بناء', '100 لاعب', 'Epic Games', 'مجاني', 'دانس', 'سكينز', 'إعصار', 'جزيرة', 'النصر الملكي'
    ]
  },
  {
    id: 'games_4',
    category: 'ألعاب',
    answer: 'ماين كرافت',
    clues: [
      'بناء', 'مكعبات', 'إبداع', 'عالم مفتوح', 'صناعة', 'بقاء', 'ستيف', 'موجانغ', 'مايكروسوفت', 'لعبة البناء'
    ]
  },

  // 🏛️ معالم سياحية - موسعة
  {
    id: 'landmarks_1',
    category: 'معالم',
    answer: 'الكعبة المشرفة',
    clues: [
      'آسيا', 'السعودية', 'مكة المكرمة', 'الحج', 'العمرة', 'قبلة المسلمين', 'الحجر الأسود', 'الطواف', 'المسجد الحرام', 'قلب العالم الإسلامي'
    ]
  },
  {
    id: 'landmarks_2',
    category: 'معالم',
    answer: 'أهرامات الجيزة',
    clues: [
      'أفريقيا', 'مصر', 'الجيزة', 'خوفو', 'خفرع', 'منكورع', 'عجائب الدنيا', 'فراعنة', 'أبو الهول', 'الحضارة المصرية'
    ]
  },
  {
    id: 'landmarks_3',
    category: 'معالم',
    answer: 'برج إيفل',
    clues: [
      'أوروبا', 'فرنسا', 'باريس', '324 متر', 'حديد', '1889', 'جوستاف إيفل', 'مدينة النور', 'رمز فرنسا', 'برج الحب'
    ]
  },
  {
    id: 'landmarks_4',
    category: 'معالم',
    answer: 'تاج محل',
    clues: [
      'آسيا', 'الهند', 'آغرا', 'رخام أبيض', 'ضريح', 'شاه جهان', 'ممتاز محل', 'عجائب الدنيا', 'الحب الخالد', 'جوهرة الهند'
    ]
  },
  {
    id: 'landmarks_5',
    category: 'معالم',
    answer: 'سور الصين العظيم',
    clues: [
      'آسيا', 'الصين', '21000 كيلومتر', 'دفاع', 'جنود', 'أسرة مينغ', 'عجائب الدنيا', 'التنين الصيني', 'الحضارة الصينية', 'سور عظيم'
    ]
  },
{
  id: 'landmarks_6',
  category: 'معالم',
  answer: 'البتراء',
  clues: [
    'الأردن',
    'مدينة وردية',
    'منحوتة في الصخور',
    'الأنباط',
    'الخزنة',
    'ممر السيق',
    'أحد عجائب الدنيا',
    'موقع أثري',
    'صحراء',
    'مدينة مفقودة'
  ]
}
,

  // 🍔 ماركات وشركات - موسعة
  {
    id: 'brands_1',
    category: 'ماركات',
    answer: 'ماكدونالدز',
    clues: [
      'أمريكا', 'طعام', 'سريع', 'برغر', 'أصفر وأحمر', 'M', 'رونالد', 'I\'m lovin\' it', 'الأقواس الذهبية', 'الأشهر عالمياً'
    ]
  },
  {
    id: 'brands_2',
    category: 'ماركات',
    answer: 'تويوتا',
    clues: [
      'آسيا', 'اليابان', 'سيارات', 'كامري', 'لاند كروزر', 'هايبرد', 'بريوس', 'الموثوقية', 'الأكثر مبيعاً', 'ملك السيارات'
    ]
  },
  {
    id: 'brands_3',
    category: 'ماركات',
    answer: 'أبل',
    clues: [
      'أمريكا', 'تكنولوجيا', 'ايفون', 'ايباد', 'ماك', 'ستيف جوبز', 'تفاحة', 'iOS', 'كاليفورنيا', 'الابتكار'
    ]
  },
  {
    id: 'brands_4',
    category: 'ماركات',
    answer: 'سامسونغ',
    clues: [
      'آسيا', 'كوريا الجنوبية', 'الكترونيات', 'جالاكسي', 'تلفزيونات', 'هواتف ذكية', 'أندرويد', 'شاشات', 'تقنية', 'عملاق التقنية'
    ]
  },
  {
    id: 'brands_5',
    category: 'ماركات',
    answer: 'مايكروسوفت',
    clues: [
      'أمريكا', 'برمجيات', 'ويندوز', 'أوفيس', 'Xbox', 'بيل غيتس', 'سياتل', 'الحاسوب', 'السحابة', 'عملاق البرمجيات'
    ]
  },
  {
    id: 'brands_6',
    category: 'ماركات',
    answer: 'جوجل',
    clues: [
      'أمريكا', 'بحث', 'إنترنت', 'أندرويد', 'يوتيوب', 'جيميل', 'كروم', 'خرائط', 'الفبايت', 'محرك البحث'
    ]
  },
  {
    id: 'brands_7',
    category: 'ماركات',
    answer: 'فيسبوك',
    clues: [
      'أمريكا', 'شبكة اجتماعية', 'مارك زوكربيرغ', 'انستغرام', 'واتساب', 'ميتا', 'أزرق', 'إعجاب', 'أصدقاء', 'التواصل الاجتماعي'
    ]
  },

  // 🍔 أطعمة - موسعة
  {
    id: 'food_1',
    category: 'أطعمة',
    answer: 'المنسف',
    clues: [
      'آسيا', 'الأردن', 'لحم', 'أرز', 'جميد', 'لوز', 'بدو', 'عيد', 'ضيافة', 'الطبق الوطني'
    ]
  },
  {
    id: 'food_2',
    category: 'أطعمة',
    answer: 'الكسكس',
    clues: [
      'أفريقيا', 'المغرب', 'قمح', 'بخار', 'خضار', 'حمص', 'جزر', 'يوم الجمعة', 'اليونسكو', 'طبق مغاربي'
    ]
  },
  {
    id: 'food_3',
    category: 'أطعمة',
    answer: 'المندي',
    clues: [
      'آسيا', 'اليمن', 'لحم', 'أرز', 'تنور', 'خضار', 'بصل', 'هيل', 'الخليج', 'طبق يمني'
    ]
  },
  {
    id: 'food_4',
    category: 'أطعمة',
    answer: 'المحشي',
    clues: [
      'آسيا', 'شام', 'أوراق عنب', 'أرز', 'لحمة', 'ليمون', 'نعناع', 'صلصة', 'شامي', 'يلبرغ'
    ]
  },
  {
    id: 'food_5',
    category: 'أطعمة',
    answer: 'السوشي',
    clues: [
      'آسيا', 'اليابان', 'سمك نيء', 'أرز', 'نوري', 'واسابي', 'زنجبيل', 'صويا صوص', 'طعام ياباني', 'لفائف السمك'
    ]
  },

  // 🎥 أفلام ومسلسلات - موسعة  
  {
    id: 'movies_1',
    category: 'أفلام',
    answer: 'تيتانيك',
    clues: [
      'أمريكا', 'سفينة', '1912', 'جليد', 'ليوناردو دي كابريو', 'كيت وينسلت', 'جيمس كاميرون', '3 ساعات', '11 أوسكار', 'الحب والمأساة'
    ]
  },
  {
    id: 'movies_2',
    category: 'أفلام',
    answer: 'أفاتار',
    clues: [
      'أمريكا', 'خيال علمي', '3D', 'بانودرا', 'أزرق', 'غابات', 'كوكب آخر', 'جيمس كاميرون', 'تقنية جديدة', 'عالم خيالي'
    ]
  },
  {
    id: 'movies_3',
    category: 'أفلام',
    answer: 'آيرون مان',
    clues: [
      'أمريكا', 'مارفل', 'سوبر هيرو', 'روبرت داوني', 'توني ستارك', 'بدلة حديدية', 'تكنولوجيا', 'أفينجرز', 'قوس قزح', 'الرجل الحديدي'
    ]
  },
  {
    id: 'movies_4',
    category: 'أفلام',
    answer: 'حرب النجوم',
    clues: [
      'أمريكا', 'خيال علمي', 'فضاء', 'جيداي', 'سيف ضوئي', 'دارث فيدر', 'لوك سكاي ووكر', 'القوة', 'جورج لوكاس', 'ملحمة الفضاء'
    ]
  },
  {
    id: 'movies_5',
    category: 'أفلام',
    answer: 'الأسود يليق بك',
    clues: [
      'أمريكا', 'كوميديا', 'فضائيين', 'رجال سود', 'ويل سميث', 'تومي لي جونز', 'MIB', 'مسح الذاكرة', 'خيال علمي', 'حراس الأرض'
    ]
  },

  // 🌍 دول وجغرافيا - موسعة
  {
    id: 'countries_1',
    category: 'دول',
    answer: 'اليابان',
    clues: [
      'آسيا', 'جزيرة', 'المحيط الهادئ', 'طوكيو', 'الساموراي', 'السوشي', 'أنيمي', 'تويوتا', 'تسونامي', 'بلد الشمس المشرقة'
    ]
  },
  {
    id: 'countries_2',
    category: 'دول',
    answer: 'البرازيل',
    clues: [
      'أمريكا الجنوبية', 'الأمازون', 'كرة قدم', 'ريو دي جانيرو', 'ساو باولو', 'سامبا', 'كرنفال', 'بيليه', 'غابات مطيرة', 'أكبر دولة جنوب أمريكا'
    ]
  },
  {
    id: 'countries_3',
    category: 'دول',
    answer: 'أستراليا',
    clues: [
      'أوقيانوسيا', 'قارة', 'الكنغر', 'كوالا', 'سيدني', 'ملبورن', 'دار أوبرا', 'الصحراء', 'الحاجز المرجاني', 'القارة الجنوبية'
    ]
  },
  {
    id: 'countries_4',
    category: 'دول',
    answer: 'كندا',
    clues: [
      'أمريكا الشمالية', 'أوراق الشجر', 'هوكي الجليد', 'أوتاوا', 'تورنتو', 'فانكوفر', 'الإنجليزية والفرنسية', 'شراب الشجر', 'بحيرات', 'الجار الشمالي'
    ]
  },
  {
    id: 'countries_5',
    category: 'دول',
    answer: 'النرويج',
    clues: [
      'أوروبا', 'الشمال', 'الأضواء الشمالية', 'أوسلو', 'مضايق', 'فايكنغ', 'سلمون', 'زيت', 'بحر الشمال', 'بلد المضائق'
    ]
  },
  {
    id: 'countries_6',
    category: 'دول',
    answer: 'نيوزيلندا',
    clues: [
      'أوقيانوسيا', 'جزيرتان', 'ويلينغتون', 'أوكلاند', 'الخراف', 'هوبيت', 'رجبي', 'ماوري', 'جبال', 'الجزر الخضراء'
    ]
  },

  // 🎵 مطربين إضافيين - للتشويش
  {
    id: 'singer_1',
    category: 'فنانين',
    answer: 'محمد منير',
    clues: [
      'أفريقيا', 'مصر', 'النوبة', 'أسوان', 'الكينغ', 'صعيد مصر', 'شعبي', 'لون أسمر', 'صوت مميز', 'ملك الغناء الشعبي'
    ]
  },
  {
    id: 'singer_2',
    category: 'فنانين',
    answer: 'محمد محسن',
    clues: [
      'أفريقيا', 'مصر', 'شباب', 'رومانسية', 'أغاني حديثة', 'صوت شابي', 'الجيل الجديد', 'عاطفية', 'موسيقى حديثة', 'نجم الشباب'
    ]
  },
  {
    id: 'singer_3',
    category: 'فنانين',
    answer: 'أحمد سعد',
    clues: [
      'أفريقيا', 'مصر', 'شعبي', 'مهرجانات', 'ريحة المسك', 'سما المصري', 'صوت قوي', 'غناء شعبي', 'النجم الشعبي', 'صوت الشارع'
    ]
  },
  {
    id: 'singer_4',
    category: 'فنانين',
    answer: 'أحمد فهمي',
    clues: [
      'أفريقيا', 'مصر', 'كوميديا', 'تمثيل وغناء', 'شيكو', 'فرقة ناجية', 'ضحك', 'مسرح مصر', 'كوميديا حديثة', 'الفنان الشامل'
    ]
  },

  // 🏃 رياضيين إضافيين للتشويش أكثر
  {
    id: 'sport_11',
    category: 'رياضة',
    answer: 'عبد الله السعيد',
    clues: [
      'أفريقيا', 'مصر', 'الأهلي', 'وسط مهاجم', 'رقم 17', 'المنتخب المصري', 'كأس أفريقيا', 'نجم الأهلي', 'صانع ألعاب', 'الساحر الصغير'
    ]
  },
  {
    id: 'sport_12',
    category: 'رياضة',
    answer: 'عبد الحليم علي',
    clues: [
      'أفريقيا', 'مصر', 'الزمالك', 'مدافع', 'قائد', 'المنتخب المصري', 'دفاع الزمالك', 'أسطورة الزمالك', 'القائد الأبيض', 'حارس المرمى الثاني'
    ]
  },
  {
    id: 'sport_13',
    category: 'رياضة',
    answer: 'عماد متعب',
    clues: [
      'أفريقيا', 'مصر', 'الأهلي', 'مهاجم', 'هداف', 'المنتخب المصري', 'أهداف كثيرة', 'نجم الأهلي', 'المهاجم الخطير', 'ملك الأهداف'
    ]
  }
];

// 🆕 دوال إدارة الأسئلة المستخدمة - مطابقة للألعاب الأخرى
const CLUES_STORAGE_KEY = 'clues-game-used-questions';

// دالة للحصول على سؤال عشوائي غير مستخدم
export const getRandomCluesQuestion = (usedQuestions = new Set()) => {
  // العثور على الأسئلة غير المستخدمة
  const availableQuestions = cluesGameQuestions.filter(q => 
    !usedQuestions.has(q.id)
  );

  // إذا لم تعد هناك أسئلة متاحة، استخدم أي سؤال
  if (availableQuestions.length === 0) {
    console.warn('⚠️ لا توجد أسئلة جديدة، سيتم استخدام سؤال مكرر...');
    if (cluesGameQuestions.length > 0) {
      const randomIndex = Math.floor(Math.random() * cluesGameQuestions.length);
      return cluesGameQuestions[randomIndex];
    }
    return null;
  }

  const randomIndex = Math.floor(Math.random() * availableQuestions.length);
  return availableQuestions[randomIndex];
};

// 💾 دوال localStorage - مطابقة للألعاب الأخرى
export const loadUsedCluesQuestions = () => {
  try {
    const saved = localStorage.getItem(CLUES_STORAGE_KEY);
    return saved ? new Set(JSON.parse(saved)) : new Set();
  } catch (error) {
    console.warn('فشل في تحميل الأسئلة المستخدمة:', error);
    return new Set();
  }
};

export const saveUsedCluesQuestions = (usedQuestions) => {
  try {
    const questionsArray = Array.from(usedQuestions);
    localStorage.setItem(CLUES_STORAGE_KEY, JSON.stringify(questionsArray));
    console.log('💾 تم حفظ الأسئلة المستخدمة:', questionsArray.length);
  } catch (error) {
    console.warn('فشل في حفظ الأسئلة المستخدمة:', error);
  }
};

export const clearUsedCluesQuestions = () => {
  try {
    localStorage.removeItem(CLUES_STORAGE_KEY);
    console.log('🗑️ تم مسح جميع الأسئلة المستخدمة');
  } catch (error) {
    console.warn('فشل في مسح الأسئلة المستخدمة:', error);
  }
};

// دوال مساعدة أخرى (بقيت نفسها)
export const getCluesQuestionsByCategory = (category) => {
  return cluesGameQuestions.filter(q => q.category === category);
};

export const getRandomCluesQuestionFromCategory = (category, usedQuestions = new Set()) => {
  const questions = getCluesQuestionsByCategory(category).filter(q => 
    !usedQuestions.has(q.id)
  );
  if (questions.length === 0) return null;
  
  const randomIndex = Math.floor(Math.random() * questions.length);
  return questions[randomIndex];
};

export const getAvailableCategories = () => {
  const categories = [...new Set(cluesGameQuestions.map(q => q.category))];
  return categories;
};

export const getCluesGameStats = (usedQuestions = new Set()) => {
  const stats = {
    total: cluesGameQuestions.length,
    used: usedQuestions.size,
    remaining: cluesGameQuestions.length - usedQuestions.size,
    categories: {}
  };
  
  cluesGameQuestions.forEach(q => {
    if (!stats.categories[q.category]) {
      stats.categories[q.category] = {
        total: 0,
        used: 0,
        remaining: 0
      };
    }
    stats.categories[q.category].total++;
    
    if (usedQuestions.has(q.id)) {
      stats.categories[q.category].used++;
    } else {
      stats.categories[q.category].remaining++;
    }
  });
  
  return stats;
};

// 📊 دالة إحصائيات الاستخدام
export const getCluesUsageStats = (usedQuestions = new Set()) => {
  return getCluesGameStats(usedQuestions);
};

// 🔍 دالة البحث في جميع الأجوبة للاقتراحات التلقائية
export const searchCluesAnswers = (searchTerm) => {
  if (!searchTerm || searchTerm.length < 1) return [];
  
  const normalizeText = (text) => {
    return text
      .toLowerCase()
      .replace(/[إأآا]/g, 'ا')        // توحيد الألف
      .replace(/[ئي]/g, 'ي')         // توحيد الياء  
      .replace(/ة/g, 'ه')            // ة → ه
      .replace(/\s+/g, ' ')          // توحيد المسافات
      .trim();
  };

  const normalizedSearch = normalizeText(searchTerm);
  
  // البحث في جميع الأجوبة
  const matches = cluesGameQuestions
    .map(q => q.answer)
    .filter(answer => normalizeText(answer).includes(normalizedSearch))
    .slice(0, 5); // أقصى 5 اقتراحات

  return [...new Set(matches)]; // إزالة التكرارات
};

// 🎯 التحقق من صحة الإجابة المختارة
export const isValidCluesAnswer = (selectedAnswer) => {
  return cluesGameQuestions.some(q => q.answer === selectedAnswer);
};

// حساب النقاط حسب رقم التلميح
export const calculatePoints = (clueNumber) => {
  // بدءاً من 200 نقطة وتقل 20 نقطة مع كل تلميح
  const basePoints = 200;
  const reduction = (clueNumber - 1) * 20;
  return Math.max(basePoints - reduction, 20); // الحد الأدنى 20 نقطة
};

export default cluesGameQuestions;