// app/data/tournamentData.js - ملف البيانات المحسّن للعبة الإقصاء
// نظام الأدوار: round8, round4, semi, final

export const tournamentQuestions = [
  // =================== دور الـ8 (أسئلة سهلة) ===================
  {
    id: 'round8_1',
    question: 'ما هي عاصمة فرنسا؟',
    answer: 'باريس',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_2',
    question: 'كم عدد الكواكب في المجموعة الشمسية؟',
    answer: 'ثمانية كواكب',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_3',
    question: 'ما هو أكبر محيط في العالم؟',
    answer: 'المحيط الهادئ',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_4',
    question: 'من هو مخترع المصباح الكهربائي؟',
    answer: 'توماس إديسون',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_5',
    question: 'ما هي عملة اليابان؟',
    answer: 'الين',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_6',
    question: 'كم عدد قارات العالم؟',
    answer: 'سبع قارات',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_7',
    question: 'ما هو أطول نهر في العالم؟',
    answer: 'نهر النيل',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_8',
    question: 'في أي عام انتهت الحرب العالمية الثانية؟',
    answer: '1945',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_9',
    question: 'ما هو الكوكب الأحمر؟',
    answer: 'المريخ',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_10',
    question: 'كم عدد ألوان قوس قزح؟',
    answer: 'سبعة ألوان',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_11',
    question: 'ما هي أصغر دولة في العالم؟',
    answer: 'الفاتيكان',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_12',
    question: 'من هو مؤسس شركة مايكروسوفت؟',
    answer: 'بيل غيتس',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_13',
    question: 'ما هي عاصمة مصر؟',
    answer: 'القاهرة',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_14',
    question: 'كم عدد أسنان الإنسان البالغ؟',
    answer: '32 سن',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_15',
    question: 'ما هو أسرع حيوان في العالم؟',
    answer: 'الفهد',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_16',
    question: 'في أي قارة تقع مصر؟',
    answer: 'أفريقيا',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_17',
    question: 'ما هو أكبر كوكب في المجموعة الشمسية؟',
    answer: 'كوكب المشتري',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_18',
    question: 'من هو مخترع الهاتف؟',
    answer: 'ألكسندر جراهام بيل',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_19',
    question: 'ما هي عاصمة السعودية؟',
    answer: 'الرياض',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },
  {
    id: 'round8_20',
    question: 'كم عدد أشهر السنة؟',
    answer: '12 شهر',
    round: 'round8',
    difficulty: 'easy',
    used: false
  },

  // =================== دور الـ4 (أسئلة متوسطة) ===================
  {
    id: 'round4_1',
    question: 'من هو مؤلف رواية "مئة عام من العزلة"؟',
    answer: 'غابرييل غارسيا ماركيز',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_2',
    question: 'ما هو العنصر الكيميائي الذي رمزه Au؟',
    answer: 'الذهب',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_3',
    question: 'في أي عام تم افتتاح قناة السويس؟',
    answer: '1869',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_4',
    question: 'ما هو اسم أطول نهر في أوروبا؟',
    answer: 'نهر الفولغا',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_5',
    question: 'من هو الرسام الذي قطع أذنه؟',
    answer: 'فان جوخ',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_6',
    question: 'كم عدد العظام في جسم الإنسان البالغ؟',
    answer: '206 عظمة',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_7',
    question: 'ما هي عاصمة كندا؟',
    answer: 'أوتاوا',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_8',
    question: 'في أي عام هبط الإنسان على القمر لأول مرة؟',
    answer: '1969',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_9',
    question: 'من هو مؤلف ملحمة الإلياذة؟',
    answer: 'هوميروس',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_10',
    question: 'ما هو الغاز الذي يشكل 78% من الغلاف الجوي؟',
    answer: 'النيتروجين',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_11',
    question: 'في أي عام تم تأسيس الأمم المتحدة؟',
    answer: '1945',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_12',
    question: 'ما هو اسم أطول عظمة في جسم الإنسان؟',
    answer: 'عظمة الفخذ',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_13',
    question: 'من هو أول إنسان سافر إلى الفضاء؟',
    answer: 'يوري غاغارين',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_14',
    question: 'ما هي المدينة التي تُسمى "مدينة الضباب"؟',
    answer: 'لندن',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },
  {
    id: 'round4_15',
    question: 'كم عدد القلوب في الأخطبوط؟',
    answer: 'ثلاثة قلوب',
    round: 'round4',
    difficulty: 'medium',
    used: false
  },

  // =================== نصف النهائي (أسئلة صعبة) ===================
  {
    id: 'semi_1',
    question: 'ما هو اسم أطول سلسلة جبال في العالم؟',
    answer: 'جبال الأنديز',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'semi_2',
    question: 'من هو العالم الذي اكتشف البنسلين؟',
    answer: 'ألكسندر فليمنغ',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'semi_3',
    question: 'ما هو اسم أعمق نقطة في المحيطات؟',
    answer: 'خندق ماريانا',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'semi_4',
    question: 'في أي عام انهار جدار برلين؟',
    answer: '1989',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'semi_5',
    question: 'ما هو العنصر الكيميائي الأكثر وفرة في الكون؟',
    answer: 'الهيدروجين',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'semi_6',
    question: 'من هو الفيلسوف اليوناني الذي علّم الإسكندر الأكبر؟',
    answer: 'أرسطو',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'semi_7',
    question: 'ما هو اسم أصغر عظمة في جسم الإنسان؟',
    answer: 'عظمة الركاب في الأذن',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'semi_8',
    question: 'من هو العالم الذي وضع نظرية التطور؟',
    answer: 'تشارلز داروين',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'semi_9',
    question: 'ما هو اسم أول كمبيوتر إلكتروني في العالم؟',
    answer: 'ENIAC',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'semi_10',
    question: 'في أي عام تم اكتشاف الحمض النووي DNA؟',
    answer: '1869',
    round: 'semi',
    difficulty: 'hard',
    used: false
  },

  // =================== النهائي (أسئلة صعبة جداً) ===================
  {
    id: 'final_1',
    question: 'ما هو العدد الذي يُطلق عليه "عدد أفوجادرو"؟',
    answer: '6.022 × 10²³',
    round: 'final',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'final_2',
    question: 'من هو العالم الذي اكتشف أن الذرة تحتوي على نواة؟',
    answer: 'إرنست رذرفورد',
    round: 'final',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'final_3',
    question: 'ما هو اسم أطول كلمة في اللغة الإنجليزية؟',
    answer: 'Pneumonoultramicroscopicsilicovolcanoconios',
    round: 'final',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'final_4',
    question: 'في أي عام تم اختراع الإنترنت (ARPANET)؟',
    answer: '1969',
    round: 'final',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'final_5',
    question: 'ما هو اسم أصغر دولة بلا منفذ بحري؟',
    answer: 'الفاتيكان',
    round: 'final',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'final_6',
    question: 'من هو العالم الذي اكتشف نظرية الكمّ؟',
    answer: 'ماكس بلانك',
    round: 'final',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'final_7',
    question: 'ما هو الرقم الذي يُمثل سرعة الضوء بالمتر/ثانية؟',
    answer: '299,792,458 متر/ثانية',
    round: 'final',
    difficulty: 'hard',
    used: false
  },
  {
    id: 'final_8',
    question: 'من هو أول حاصل على جائزة نوبل في الفيزياء؟',
    answer: 'فيلهلم رونتجن',
    round: 'final',
    difficulty: 'hard',
    used: false
  }
];

// 🔧 دوال مساعدة لإدارة الأسئلة
export const getTournamentQuestionsByRound = (round) => {
  return tournamentQuestions.filter(q => q.round === round);
};

export const getAvailableQuestionsByRound = (round, usedQuestionIds = []) => {
  return tournamentQuestions.filter(q => 
    q.round === round && !usedQuestionIds.includes(q.id)
  );
};

export const getRandomQuestionFromRound = (round, usedQuestionIds = []) => {
  const availableQuestions = getAvailableQuestionsByRound(round, usedQuestionIds);
  if (availableQuestions.length === 0) return null;
  
  const randomIndex = Math.floor(Math.random() * availableQuestions.length);
  return availableQuestions[randomIndex];
};

export const getTournamentStats = () => {
  const stats = {
    total: tournamentQuestions.length,
    round8: tournamentQuestions.filter(q => q.round === 'round8').length,
    round4: tournamentQuestions.filter(q => q.round === 'round4').length,
    semi: tournamentQuestions.filter(q => q.round === 'semi').length,
    final: tournamentQuestions.filter(q => q.round === 'final').length
  };
  
  return stats;
};

// 🔄 دوال إدارة localStorage للأسئلة المستخدمة
export const saveUsedQuestions = (usedQuestionIds) => {
  try {
    localStorage.setItem('tournament-used-questions', JSON.stringify(usedQuestionIds));
  } catch (error) {
    console.warn('فشل في حفظ الأسئلة المستخدمة:', error);
  }
};

export const loadUsedQuestions = () => {
  try {
    const saved = localStorage.getItem('tournament-used-questions');
    return saved ? JSON.parse(saved) : [];
  } catch (error) {
    console.warn('فشل في تحميل الأسئلة المستخدمة:', error);
    return [];
  }
};

export const clearUsedQuestions = () => {
  try {
    localStorage.removeItem('tournament-used-questions');
  } catch (error) {
    console.warn('فشل في مسح الأسئلة المستخدمة:', error);
  }
};

// 📊 دالة للحصول على إحصائيات الأسئلة المستخدمة
export const getUsageStats = (usedQuestionIds = []) => {
  const stats = getTournamentStats();
  const usedByRound = {
    round8: usedQuestionIds.filter(id => id.startsWith('round8_')).length,
    round4: usedQuestionIds.filter(id => id.startsWith('round4_')).length,
    semi: usedQuestionIds.filter(id => id.startsWith('semi_')).length,
    final: usedQuestionIds.filter(id => id.startsWith('final_')).length
  };
  
  return {
    total: {
      available: stats.total,
      used: usedQuestionIds.length,
      remaining: stats.total - usedQuestionIds.length
    },
    byRound: {
      round8: {
        available: stats.round8,
        used: usedByRound.round8,
        remaining: stats.round8 - usedByRound.round8
      },
      round4: {
        available: stats.round4,
        used: usedByRound.round4,
        remaining: stats.round4 - usedByRound.round4
      },
      semi: {
        available: stats.semi,
        used: usedByRound.semi,
        remaining: stats.semi - usedByRound.semi
      },
      final: {
        available: stats.final,
        used: usedByRound.final,
        remaining: stats.final - usedByRound.final
      }
    }
  };
};